jQuery(function($){var bonusField=$('input#bonus');var accountSelector=$('select#account');var updateBonusSelector=function(accountSelector){if(typeof mapper!=="undefined"&&accountSelector.val()in mapper){bonusField.val(mapper[accountSelector.val()]['bonus']);$('#bonus-name').val(mapper[accountSelector.val()]['name']);$('.terms-label a').attr('href',mapper[accountSelector.val()]['tc']);}};updateBonusSelector(accountSelector);accountSelector.change(function(event){event.preventDefault();updateBonusSelector(accountSelector);});function WidgetBonus(params){WidgetForm.apply(this,arguments);this.setup();}
WidgetBonus.prototype=$.extend(new WidgetForm(),{validation:null,setup:function(){var validation=this.validation=new Form(),node=this.node,fn_not_empty=Validation.notEmpty,fn_checked=Validation.isChecked;validation.add(node.find('#terms'),{'validate':fn_checked});this.setupFieldHighlighting(validation);this.initChain();},validate:function(values){return this.validation.validate();},_handleFormSubmit:function(){if(this.sending)
return false;var values=this.form.serializeObject(),data;if(this.validate(values)){this.sending=true;$("button[type=submit]").attr("disabled","disabled");return true;}
return false;}});this.bonusForm=new WidgetBonus({'html':$('form.deposit-form')});});